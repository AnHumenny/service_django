{% extends "index/base.html" %}
{% block content %}
<div class="grp-wrapper">
    <div class="main-table" style="display: grid; grid-template-columns: 80% 20%; align-items: start;">
        <div class="data-section">
            <div class="main-table data-table">
                <div class="table-string header-row">
                    <div class="title-table table-item header-item">ID</div>
                    <div class="title-table table-item header-item">Номер заявки</div>
                    <div class="title-table table-item header-item">Категория</div>
                    <div class="title-table table-item header-item">Sla</div>
                    <div class="title-table table-item header-item">Дата открытия</div>
                    <div class="title-table table-item header-item">Дата закрытия</div>
                    <div class="title-table table-item header-item">Город</div>
                    <div class="title-table table-item header-item">Адрес</div>
                    <div class="title-table table-item header-item">Организация</div>
                    <div class="title-table table-item header-item">Статус</div>
                </div>
                {% for inc in accident_list %}
                <div class="table-string data-row">
                    <div class="content-table table-item data-item">{{ inc.id|safe }}</div>
                    <div class="content-table table-item data-item">
                        <a class="nav-link" href="{% url 'accident-detail' inc.id %}">{{ inc.number|safe }}</a>
                    </div>
                    <div class="content-table table-item data-item">{{ inc.category|safe }}</div>
                    <div class="content-table table-item data-item">{{ inc.sla|safe }}</div>
                    <div class="content-table table-item data-item add_date">{{ inc.datetime_open|date:'Y-m-d H:i' }}</div>
                    <div class="content-table table-item data-item add_date">{{ inc.datetime_close|date:'Y-m-d H:i' }}</div>
                    <div class="content-table table-item data-item">{{ inc.city|safe }}</div>
                    <div class="content-table table-item data-item">{{ inc.address|safe }}</div>
                    <div class="content-table table-item data-item">{{ inc.organization|safe }}</div>
                    <div class="content-table table-item data-item">
                        {% if inc.status == "open" %}
                        <p class="open">{{ inc.status|safe }}</p>
                        {% elif inc.status == "check" %}
                        <p class="check">{{ inc.status|safe }}</p>
                        {% else %}
                        <p>{{ inc.status|safe }}</p>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="pagination">
                <div class="step-links">
                    {% if page_obj.has_previous %}
                        <a href="?page=1">&laquo; В начало</a> |
                        <a href="?page={{ page_obj.previous_page_number }}">Предыдущая страница</a>
                    {% endif %}
                    <span class="current">
                        страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }} |
                    </span>
                    {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}">Следующая страница</a> |
                        <a href="?page={{ page_obj.paginator.num_pages }}">В конец &raquo;</a>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="nav-section">
            <div class="main-table">
                <div class="table-string header-row">
                    <div class="title-table table-item header-item">Статус заявок</div>
                </div>
                <div class="table-string nav-row">
                    <div class="title-table table-item nav-item">
                        <a class="nav-link" href="{% url 'accident-open-list' %}">Открытые заявки</a>
                    </div>
                </div>
                <div class="table-string nav-row">
                    <div class="title-table table-item nav-item">
                        <a class="nav-link" href="{% url 'accident-close-list' %}">Закрытые заявки</a>
                    </div>
                </div>
                <div class="table-string nav-row">
                    <div class="title-table table-item nav-item">
                        <a class="nav-link" href="{% url 'accident-check-list' %}">На проверке</a>
                    </div>
                </div>
                <div class="main-table">
                <div class="table-string header-row">
                    <div class="title-table table-item header-item"><br>Экспорт в .csv</div>
                </div>
                <div class="table-string nav-row">
                    <div class="title-table table-item nav-item">
                        <a class="nav-link" href="{% url 'download_actual_accident' %}">Текущий месяц</a>
                    </div>
                </div>
                <div class="table-string nav-row">
                    <div class="title-table table-item nav-item">
                        <a class="nav-link" href="{% url 'download_previos_accident' %}">Предыдущий месяц</a>
                </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}